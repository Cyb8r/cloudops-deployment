# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool: DEV_TEST

stages: 

# Initialize terraform environment
- stage: TerraformInit
  displayName: 'Terraform Initialize'
  jobs: 
  - job: TerraformInit
    steps: 
    - script: |
          terraform init -upgrade
      displayName: Initialize terraform

- stage: TerraformPlan
  displayName: 'Terraform Plan'
  jobs:
        - job: TerraformPlan 
          steps: 
          - script: | 
                   ls -lR
          - checkout: self 
          - script: |
                terraform plan
            displayName: Run Terraform plan
    
